<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Collection with Physiological Sensors &mdash; VRSensorIntegration 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=6e2cc41c" />

  
    <link rel="shortcut icon" href="../../_static/tars_logo_sq.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=2709fde1"></script>
        <script src="../../_static/doctools.js?v=888ff710"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../../_static/copybutton.js?v=f281be69"></script>
        <script src="https://cdn.jsdelivr.net/gh/bonartm/quizdown-js@latest/public/build/quizdown.js"></script>
        <script>quizdown.init({"primary_color": "#31b457", "quizdown_js": "https://cdn.jsdelivr.net/gh/bonartm/quizdown-js@latest/public/build/quizdown.js"});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Integration with VR" href="../m5/integration.html" />
    <link rel="prev" title="Introduction to Physiological Sensors" href="../m3/intro_to_sensors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #292929                    " >

          
          
          <a href="../../index.html" class="icon icon-home">
            VRSensorIntegration
              <img src="../../_static/tars_logo_sq.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../m1/introduction.html">Introduction to the Course</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m1/contact_page.html">Contact the Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m1/install_unity.html">Installing Unity</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial Modules</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../m1/unity_orientation.html">Getting Started With Unity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m2/unity_vr.html">Unity VR Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m3/intro_to_sensors.html">Introduction to Physiological Sensors</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Collection with Physiological Sensors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-the-trigno-link">Setting up the Trigno Link</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#trigno-link-design">Trigno Link Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connecting-sensors">Connecting Sensors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#connecting-to-unity">Connecting to Unity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#a-simple-unity-application">A Simple Unity Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modifying-the-example-script">Modifying the Example Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-gameobjects">Adding GameObjects</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-application">Running the Application</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#additional-information">Additional Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#collecting-sensor-data-in-non-real-time">Collecting Sensor Data in Non-Real Time</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collecting-sensor-data-in-real-time">Collecting Sensor Data in Real Time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#section-review">Section Review</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-self-assessment">Module Self-Assessment</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../m5/integration.html">Integration with VR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m6/data_analysis.html">Data Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Events and Additional Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../m7/workshop.html">Hands-on Workshop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../m7/error_handling.html">Troubleshooting Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #292929                    " >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">VRSensorIntegration</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data Collection with Physiological Sensors</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/content/m4/data_collection.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../m3/intro_to_sensors.html" class="btn btn-neutral float-left" title="Introduction to Physiological Sensors" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../m5/integration.html" class="btn btn-neutral float-right" title="Integration with VR" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-collection-with-physiological-sensors">
<span id="analysis-to-collect"></span><h1>Data Collection with Physiological Sensors<a class="headerlink" href="#data-collection-with-physiological-sensors" title="Link to this heading"></a></h1>
<p>Now that you have explored both Unity and the various types of physiological sensors, it’s time to begin integrating them together. You will do this using the <strong>Delsys Trigno Link</strong>, a device that allows multiple physiological sensors to be connected to a single computer via bluetooth. This tutorial will include an in-depth tutorial on how to connect and setup the Trigno Link, and how to collect data from the sensors attached to it. You will start simple, and develop a simple, console-based based Unity application that prints out the data recieved rom the sensors. The main goal of this module is to ensure that you can effectively use and read from the Trigno Link, and access that data in Unity. Once you have these basics down, the next module wll move on to more complex integration techniques using VR.</p>
<section id="setting-up-the-trigno-link">
<h2>Setting up the Trigno Link<a class="headerlink" href="#setting-up-the-trigno-link" title="Link to this heading"></a></h2>
<a class="reference internal image-reference" href="../../_images/TrignoLinkPromo.png"><img alt="An Image of the Trigno Link." src="../../_images/TrignoLinkPromo.png" style="width: 800px;" /></a>
<p>The Trigno Link is the key to integrating physiological sensors with Unity. While the Trigno Link is not required to receive data from only Trigno sensors, it is necessary to use <em>both</em> Trigno and third-party sensors congruently. As such, it is important to understand how the Link works in order to seamlessly integrate both Delsys and third-party sensors simultaneously.</p>
<section id="trigno-link-design">
<h3>Trigno Link Design<a class="headerlink" href="#trigno-link-design" title="Link to this heading"></a></h3>
<p>The first step to effectively using the Trigno Link is knowing how it works. The Trigno Link is a wireless device that connects to a computer via a USB-C dongle. Two to thirty-two sensors can be simultaneously linked to the Trigno Link. Essentially, these sensors concurrently transmit their raw data to the Link, where it keeps their data streams separate and sends them to the computer for use. This data can come from a variety of sensors, including but not limited to any of the sensors mentioned in the previous module. Crucially, this device is not locked to only Delsys products, but supports many third-party options, vastly increasing its versatility. You will need the <strong>Trigno Wireless BioFeedback System</strong> in order for the Link to provide the synchronized data. You will connect the device to a computer using the USB-A side of the included cable, and attach the USB-C side to the female plug on the Link. An LED light will glow on the top of the Link once it has been connected. The color of this light can help determine the current feedback state of the Link. You can find a list of the different feedback states and their corresponding light colors in the <a class="reference external" href="https://delsys.com/downloads/USERSGUIDE/trigno/link-communication-module.pdf">Trigno Link User Guide</a>.</p>
</section>
<section id="getting-started">
<h3>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h3>
<p>Upon unboxing your Trigno Link, you’ll be greeted to the compact device, a USB-C dongle, a quickstart guide, and a user guide. It is <em>highly</em> recommended to read the quickstart guide and user guide in conjunction with the tutorial presented here, as this will give you the most comprehensive understanding possible. Additionally, you can use these resources to troubleshoot any issues you have with the product.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to use the Trigno Link, you must have at least two compatible physiological sensors, with at least one being a Trigno Sensor (Which you will already be using due to the requirement of the Trigno Wireless BioFeedback System’s usage). The link itself does not generate any data, instead it allows data from <em>other</em> sensors to be read in tandem. All Delsys made sensors are natively supported, alongside a list of third-party sensors that you can find <a class="reference external" href="https://delsys.com/trigno-link/">here</a> in the <em>Applications</em> section.</p>
</div>
<p>To begin using the Link, you will need the <em>Trigno</em> Discover application, a piece of Delsys software used to monitor and receive data from the sensors on a computer. This software can be found <a class="reference external" href="https://delsys.com/activation/">here</a>. As of writing this tutorial, the current version of this software is 1.6.5.. You will have to either log-in or sign up in order to use the application, and you have the option of working offline as well. Once you have the software installed and have created an account, you are ready to begin connecting sensors.</p>
</section>
<section id="connecting-sensors">
<h3>Connecting Sensors<a class="headerlink" href="#connecting-sensors" title="Link to this heading"></a></h3>
<p>Using the Trigno Link, Trigno Wireless BioFeedback System, and Trigno Discover, you can now connect sensors. To do this, follow the steps below:</p>
<a class="reference internal image-reference" href="../../_images/trignoLink.jpg"><img alt="An Image of the Trigno Link connected to a laptop. The light on the Link is glowing amber." src="../../_images/trignoLink.jpg" style="width: 200px;" /></a>
<ol class="arabic simple">
<li><p>Connect the Trigno Link to your computer. First, plug the USB-A side of the included cable into the computer, then plug the USB-C side of the cable into the link itself. If done correctly, the LED indicator should glow amber on the Link. You are ready to move on to the next step.</p></li>
<li><p>Connect your Trigno Wireless BioFeedback System to your computer via USB. This is necessary to use the Trigno sensors and any other third-party sensors with the Link. You can find a manual to assist you in connecting this device and its sensors <a class="reference external" href="https://www.delsys.com/downloads/USERSGUIDE/trigno/wireless-biofeedback-system.pdf">here</a>. Note that it is your responsibility to understand how to connect and use the various sensors you intend to employ. Usually, you can find detailed guides on the manufacturer’s website.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/DiscoverHome.png"><img alt="An Image of the homepage for Trigno Discover." src="../../_images/DiscoverHome.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="3">
<li><p>Launch the Trigno Discover application on your computer. Log in to your account and verify that the Trigno Link and Trigno Wireless BioFeedback System are recognized by the software (You shouldn’t even be able to access the application if the Wireless Feedback System isn’t connected). You should see a tab for the Trigno Base and for the Trigno Link in the app. Should you need additional assistance in using Trigno Discover, the <a class="reference external" href="https://delsys.com/downloads/USERSGUIDE/trigno/discover.pdf">User Guide</a> can help you.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/DiscoverHomeConnected.png"><img alt="An Image of the homepage for Trigno Discover with one Avanti sensor added." src="../../_images/DiscoverHomeConnected.png" style="width: 800px;" /></a>
<ol class="arabic simple">
<li><p>Add the sensors you wish to use to the Sensor Configuration Panel on the home screen. You can do this manually using the <em>Add New Sensor</em> option. Once a scanner has been paired by the system, you can use the <em>Scan for Sensors</em> option to attempt to connect all previously connected sensors, making the manual pairing unnecessary for subsequent usage. Scanning for sensors can even find find some sensors without having added them before.Generally, the bast practice is to <em>Scan for Sensors</em> first and then use <em>Add New Sensor</em> to add any that weren’t caught by the scan. For sensors connected via the Trigno Link, use the <em>Scan for Sensors</em> option in the Trigno Link tab while pairing on the sensor.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/DiscoverHR.png"><img alt="An Image of the Trigno Link page for Trigno Discover with one HR sensor added." src="../../_images/DiscoverHR.png" style="width: 800px;" /></a>
<ol class="arabic simple">
<li><p>Depending on the sensors you are using, you may have some additional options to pick between in the sensor’s configuration mode selection. For example, Trigno Avanti sensors can switch between EMG, Accelerator, Gyroscope, Orientation, and IMU sensing. Refer to the manufacturers guide for your specific sensor to see what options are available.</p></li>
<li><p>Once your sensors have all been connected and are visible on the <em>Sensor Configuration Panel</em>, it is good practice to run a test trial to make sure the data is being properly collected from all sensors. You can use the Trial Information Tab to control your data collection.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the Trigno Discover application can be used by itself to collect sensors from data and store it as csv data, the data collection used in this tutorial will be done using a Unity integration instead, using the data in real time to influence the Unity application. Despite this, Trigno Discover is an excellent tool for general data collection, and it is good have proficiency in it.</p>
</div>
</section>
</section>
<section id="connecting-to-unity">
<h2>Connecting to Unity<a class="headerlink" href="#connecting-to-unity" title="Link to this heading"></a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There is a known bug preventing the usage of the Delsys API with specific versions of Unity. While it is unknown exactly which versions are affected, 2022.3.7f1 has been tested and is working, so that is what will be used here and what is recommended for you to use as well.</p>
</div>
<p>Now that you have your sensors connected and are ready to begin using them, it’s time to create a Unity application. Follow the steps below to get set up for Unity development with the Delsys API.</p>
<a class="reference internal image-reference" href="../../_images/UnityLogin.png"><img alt="An Image of the Unity login screen." src="../../_images/UnityLogin.png" style="width: 800px;" /></a>
<ol class="arabic simple">
<li><p>Launch Unity Hub and login to your Unity account. If you do not have either of these completed, see <a class="reference internal" href="../m1/install_unity.html#new-to-install"><span class="std std-ref">Installing Unity</span></a>.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/EmptyProjects.png"><img alt="An Image of the projects tab in Unity Hub." src="../../_images/EmptyProjects.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="2">
<li><p>On the sidebar on the left side of the application, select the <em>Projects</em> tab.</p></li>
<li><p>On the top right of the application, press the button titled <em>New project</em>.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/create_link_project.png"><img alt="An Image of the 2D project template in Unity Hub." src="../../_images/create_link_project.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="4">
<li><p>From here you can select any template project type you would like, depending on the context of the application you are creating. For this basic introduction to the integration, we will use the <em>2D Core</em> template.</p></li>
<li><p>Likewise to the projects you created previously in this set of tutorials, you can name the project whatever you like and choose where it is saved.</p></li>
<li><p>Click the <em>Create project</em> button in the bottom right corner of the application to create the project and launch the Unity editor.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/project_settings.png"><img alt="An Image of navigating to the package manager in the new 3D project." src="../../_images/project_settings.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="7">
<li><p>In the editor, navigate to the <em>Edit</em> option in the top ribbon, and select <em>Project Settings</em> from the dropdown menu.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/il2cpp_net.png"><img alt="An Image of the configuration section of the Player Settings menu." src="../../_images/il2cpp_net.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="8">
<li><p>In the project settings menu, select the option on the right toolbar titled <em>Player</em>. In the menu for your selected platform (in this case Windows, Mac, and Linux), scroll down to the <em>Configuration</em> section. In this location, make sure the <em>Scripting Backend</em> is set to IL2CPP and that the <em>Api Compatibility Level</em> is set to .NET Framework. Your project may take a minute to apply these changes.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/plugins_folder.png"><img alt="An Image of the plugins folder in the assets folder." src="../../_images/plugins_folder.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="9">
<li><p>In the assets folder of your Unity project, add an empty folder called <em>Plugins</em>. This is where you will put the API files.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/delsys_github_repo.png"><img alt="An Image of the Delsys Example Applications Github Repository." src="../../_images/delsys_github_repo.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="10">
<li><p>To get the API files you will need to add to your project, go to the <a class="reference external" href="https://github.com/delsys-inc/Example-Applications">Delsys Example Applications</a> Github page. Select the green button labeled <em>Code</em>, and select the <em>Download ZIP</em> option from the dropdown menu that appears. This should download a ZIP file containing the example projects, as well as the API files you’ll need.</p></li>
<li><p>Right click the ZIP file you just downloaded in your file explorer, and Extract it. In Windows 11, this is done through an option called <em>Extract All…</em> in the right click menu.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/assets_subfolder.png"><img alt="An Image of Assets subfolder in the Unity Example." src="../../_images/assets_subfolder.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="12">
<li><p>Open the extracted folder, and navigate to the <code class="docutils literal notranslate"><span class="pre">~\Example-Applications-main\Unity\Assets</span></code> subdirectory.</p></li>
<li><p>Copy the Streaming Assets folder into your project’s assets folder.</p></li>
<li><p>Navigate to the <code class="docutils literal notranslate"><span class="pre">~\Example-Applications-main\Delsys</span> <span class="pre">Unity</span> <span class="pre">Example\Assets\Plugins</span></code> folder and copy everything contained in it to the Plugins folder you created for your project.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/codedom.png"><img alt="An Image of the Plugins folder of your project with System.Reactive.Linq.dll and System.Reactive.Linq.dll.meta, and System.Management.dll, and System.Management.dll.meta removed, and System.CodeDom.dll and System.CodeDom.dll.meta selected." src="../../_images/codedom.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="15">
<li><p>In the plugins folder in your project, delete the file called <em>System.CodeDom.dll</em> and its associated meta file <em>System.CodeDom.dll.meta</em>. Delete <em>System.Reactive.Linq.dll</em> and its associated meta file <em>System.Reactive.Linq.dll.meta</em>.  Delete <em>System.Management.dll</em> and its associated meta file <em>System.Management.dll.meta</em>.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/project_root.png"><img alt="An Image of the project's root folder with the moved file in it." src="../../_images/project_root.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="16">
<li><p>In the plugins folder in your project, Move the file called <em>SiUSBXp.dll</em> and its associated meta file <em>SiUSBXp.dll.meta</em> to the root folder of your project. This should result in something looking like the image above.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/assets_unity_example.png"><img alt="An Image of Assets subfolder with the UnityScript.cs in it." src="../../_images/assets_unity_example.png" style="width: 800px;" /></a>
<ol class="arabic simple" start="17">
<li><p>Lastly, copy the <em>UnityExample.cs</em> script from the Delsys Unity Example project into the Assets folder of your project. You will be adding to this script to implement the Trigno Link, since it is easier than starting from scratch.</p></li>
<li><p>Allow your Unity project time to reload its domain, and then ensure there are no compilation errors with the project (You may see warnings, indicated with a yellow exclamation mark, these are okay). If there are none, you are ready to move on. If not, retry the steps above on a different version of Unity or try and troubleshoot the compilation error using the <a class="reference internal" href="../m7/error_handling.html#troubleshooting"><span class="std std-ref">Troubleshooting Resources</span></a> page of this site.</p></li>
</ol>
</section>
<section id="a-simple-unity-application">
<h2>A Simple Unity Application<a class="headerlink" href="#a-simple-unity-application" title="Link to this heading"></a></h2>
<p>For this simple application, you are going to be slightly modifying the Unity Example script that you got from the Delsys Unity Example Application. It is entirely possible to make your own script utilizing the Delsys API, and if you wish to do so you may, but using the Example script as a template offers useful and working functions right from the start, saving you time and providing you with something you know works. If you do decide to create your own scripts utilizing the Delsys API in the future, you can use the Example script alongside the <a class="reference external" href="http://data.delsys.com/DelsysServicePortal/api/web-downloads/MAN-032-1-1%20API%20Quick%20Start%20Guide.pdf">Delsys API Quickstart Guide</a> and <a class="reference external" href="https://delsys.com/downloads/USERSGUIDE/delsys-api.pdf">Delsys API User Guide</a> to learn about the available functionality. You can find the Unity project on our <a class="reference external" href="https://github.com/tarstutorials/vrsensorint-trignolinkdemo">GitHub page</a>.</p>
<section id="modifying-the-example-script">
<h3>Modifying the Example Script<a class="headerlink" href="#modifying-the-example-script" title="Link to this heading"></a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before you begin modifying your script, please remember to put your API license and key into the <code class="docutils literal notranslate"><span class="pre">private</span> <span class="pre">string</span> <span class="pre">key</span> <span class="pre">=</span> <span class="pre">&quot;&quot;;</span></code> and <code class="docutils literal notranslate"><span class="pre">private</span> <span class="pre">string</span> <span class="pre">license</span> <span class="pre">=</span> <span class="pre">&quot;&quot;;</span></code> variables of your modified Example script. You cannot use the API without them.</p>
</div>
<p>Below is the modified code for the Example script that allows it to search for Trigno Link components alongside the Trigno RF ones. Beneath that you will be given descriptions of what each modification does, so you can use it in your future projects.</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Channels.Transform</span><span class="p">;</span>
<span class="linenos">  2</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Configurations</span><span class="p">;</span>
<span class="linenos">  3</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Configurations.DataSource</span><span class="p">;</span>
<span class="linenos">  4</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Contracts</span><span class="p">;</span>
<span class="linenos">  5</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.DelsysDevices</span><span class="p">;</span>
<span class="linenos">  6</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Events</span><span class="p">;</span>
<span class="linenos">  7</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Pipelines</span><span class="p">;</span>
<span class="linenos">  8</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Transforms</span><span class="p">;</span>
<span class="linenos">  9</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Utils</span><span class="p">;</span>
<span class="linenos"> 10</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">System</span><span class="p">;</span>
<span class="linenos"> 11</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">System.Collections.Generic</span><span class="p">;</span>
<span class="linenos"> 12</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">System.IO</span><span class="p">;</span>
<span class="linenos"> 13</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">System.Linq</span><span class="p">;</span>
<span class="linenos"> 14</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">System.Threading.Tasks</span><span class="p">;</span>
<span class="linenos"> 15</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine</span><span class="p">;</span>
<span class="linenos"> 16</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine.UI</span><span class="p">;</span>
<span class="linenos"> 17</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">UnityEngine.Events</span><span class="p">;</span>
<span class="linenos"> 18</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">TMPro</span><span class="p">;</span>
<span class="linenos"> 19</span><span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="nn">DelsysAPI.Components.TrignoLink</span><span class="p">;</span>
<span class="linenos"> 20</span><span class="w">  </span><span class="k">public</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">UnityExample</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="n">MonoBehaviour</span>
<span class="linenos"> 21</span><span class="w">  </span><span class="p">{</span>
<span class="linenos"> 22</span><span class="w">      </span><span class="c1">//Paste key/license strings here</span>
<span class="linenos"> 23</span><span class="w">      </span><span class="k">private</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="linenos"> 24</span><span class="w">      </span><span class="k">private</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">license</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">;</span>
<span class="linenos"> 25</span>
<span class="linenos"> 26</span>
<span class="linenos"> 27</span><span class="w">      </span><span class="c1">/// &lt;summary&gt;</span>
<span class="linenos"> 28</span><span class="w">      </span><span class="c1">/// Data structure for recording every channel of data.</span>
<span class="linenos"> 29</span><span class="w">      </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="linenos"> 30</span><span class="w">      </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="p">();</span>
<span class="linenos"> 31</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">ScanButton</span><span class="p">;</span>
<span class="linenos"> 32</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">StartButton</span><span class="p">;</span>
<span class="linenos"> 33</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">StopButton</span><span class="p">;</span>
<span class="linenos"> 34</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">SelectButton</span><span class="p">;</span>
<span class="linenos"> 35</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="n">Button</span><span class="w"> </span><span class="n">PairButton</span><span class="p">;</span>
<span class="linenos"> 36</span><span class="w">      </span><span class="n">IDelsysDevice</span><span class="w"> </span><span class="n">DeviceSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
<span class="linenos"> 37</span><span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">TotalLostPackets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="linenos"> 38</span><span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">TotalDataPoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="linenos"> 39</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="n">TMP_Text</span><span class="w"> </span><span class="n">APIStatusText</span><span class="p">,</span><span class="w"> </span><span class="n">TestText</span><span class="p">,</span><span class="w"> </span><span class="n">PipelineState</span><span class="p">,</span><span class="w"> </span><span class="n">EMGDataText</span><span class="p">,</span><span class="w"> </span><span class="n">HRDataText</span><span class="p">;</span>
<span class="linenos"> 40</span><span class="w">      </span><span class="n">Pipeline</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">;</span>
<span class="linenos"> 41</span><span class="w">      </span><span class="n">ITransformManager</span><span class="w"> </span><span class="n">TransformManager</span><span class="p">;</span>
<span class="linenos"> 42</span><span class="w">      </span><span class="kt">string</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">pipeline_state</span><span class="p">;</span>
<span class="linenos"> 43</span><span class="w">      </span><span class="n">UnityEvent</span><span class="w"> </span><span class="n">m_scan</span><span class="p">;</span>
<span class="linenos"> 44</span><span class="w">      </span><span class="kt">bool</span><span class="w"> </span><span class="k">select</span><span class="p">,</span><span class="w"> </span><span class="n">scan</span><span class="p">,</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="p">,</span><span class="w"> </span><span class="n">pair</span><span class="p">;</span>
<span class="linenos"> 45</span><span class="w">      </span><span class="kt">string</span><span class="p">[]</span><span class="w"> </span><span class="n">compoentNames</span><span class="p">;</span>
<span class="linenos"> 46</span><span class="w">      </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="n">AllCollectionData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;&gt;</span><span class="p">();</span>
<span class="linenos"> 47</span><span class="w">      </span><span class="n">VerticalLayoutGroup</span><span class="w"> </span><span class="n">verticalLayoutGroup</span><span class="p">;</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span><span class="w">      </span><span class="k">private</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">usingTrignoLink</span><span class="p">;</span>
<span class="linenos"> 50</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">latestEMGData</span><span class="p">;</span>
<span class="linenos"> 51</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">latestHRData</span><span class="p">;</span>
<span class="linenos"> 52</span>
<span class="linenos"> 53</span><span class="w">      </span><span class="c1">// Use this for initialization</span>
<span class="linenos"> 54</span><span class="w">      </span><span class="k">void</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span>
<span class="linenos"> 55</span><span class="w">      </span><span class="p">{</span>
<span class="linenos"> 56</span>
<span class="linenos"> 57</span><span class="w">          </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Entered Start Function.&quot;</span><span class="p">);</span>
<span class="linenos"> 58</span>
<span class="linenos"> 59</span><span class="w">          </span><span class="n">usingTrignoLink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="linenos"> 60</span>
<span class="linenos"> 61</span><span class="w">          </span><span class="c1">//Finding references to all the buttons in the scene</span>
<span class="linenos"> 62</span><span class="w">          </span><span class="n">ScanButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;ScanButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="linenos"> 63</span><span class="w">          </span><span class="n">ScanButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Scan</span><span class="p">);</span>
<span class="linenos"> 64</span>
<span class="linenos"> 65</span><span class="w">          </span><span class="n">StartButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;StartButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="linenos"> 66</span><span class="w">          </span><span class="n">StartButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Start</span><span class="p">);</span>
<span class="linenos"> 67</span>
<span class="linenos"> 68</span><span class="w">          </span><span class="n">StopButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;StopButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="linenos"> 69</span><span class="w">          </span><span class="n">StopButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Stop</span><span class="p">);</span>
<span class="linenos"> 70</span>
<span class="linenos"> 71</span><span class="w">          </span><span class="n">SelectButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;SelectButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="linenos"> 72</span><span class="w">          </span><span class="n">SelectButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Select</span><span class="p">);</span>
<span class="linenos"> 73</span>
<span class="linenos"> 74</span><span class="w">          </span><span class="n">PairButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;PairButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="linenos"> 75</span><span class="w">          </span><span class="n">PairButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Pair</span><span class="p">);</span>
<span class="linenos"> 76</span>
<span class="linenos"> 77</span><span class="w">          </span><span class="n">scan</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span><span class="w"> </span><span class="c1">//Enabling only the Scan button for now.</span>
<span class="linenos"> 78</span><span class="w">          </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="linenos"> 79</span><span class="w">          </span><span class="n">stop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="linenos"> 80</span><span class="w">          </span><span class="k">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="linenos"> 81</span><span class="w">          </span><span class="n">pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="linenos"> 82</span>
<span class="linenos"> 83</span><span class="w">          </span><span class="n">CopyUSBDriver</span><span class="p">();</span><span class="w"> </span><span class="c1">// Copying the SiUSBXp.dll file if not present</span>
<span class="linenos"> 84</span><span class="w">          </span><span class="n">InitializeDataSource</span><span class="p">();</span><span class="w"> </span><span class="c1">//Initializing the Delsys API Data source</span>
<span class="linenos"> 85</span><span class="w">      </span><span class="p">}</span>
<span class="linenos"> 86</span>
<span class="linenos"> 87</span>
<span class="linenos"> 88</span><span class="w">      </span><span class="c1">// Update is called once per frame</span>
<span class="linenos"> 89</span><span class="w">      </span><span class="k">void</span><span class="w"> </span><span class="nf">Update</span><span class="p">()</span>
<span class="linenos"> 90</span><span class="w">      </span><span class="p">{</span>
<span class="linenos"> 91</span><span class="w">          </span><span class="n">APIStatusText</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">text</span><span class="p">;</span>
<span class="linenos"> 92</span><span class="w">          </span><span class="n">SelectButton</span><span class="p">.</span><span class="n">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">select</span><span class="p">;</span>
<span class="linenos"> 93</span><span class="w">          </span><span class="n">ScanButton</span><span class="p">.</span><span class="n">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scan</span><span class="p">;</span>
<span class="linenos"> 94</span><span class="w">          </span><span class="n">StartButton</span><span class="p">.</span><span class="n">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="p">;</span>
<span class="linenos"> 95</span><span class="w">          </span><span class="n">StopButton</span><span class="p">.</span><span class="n">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stop</span><span class="p">;</span>
<span class="linenos"> 96</span><span class="w">          </span><span class="n">PairButton</span><span class="p">.</span><span class="n">enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pair</span><span class="p">;</span>
<span class="linenos"> 97</span><span class="w">          </span><span class="n">PipelineState</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineController</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">PipelineIds</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">CurrentState</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
<span class="linenos"> 98</span><span class="w">          </span><span class="n">EMGDataText</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Latest EMG Data: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">latestEMGData</span><span class="p">;</span>
<span class="linenos"> 99</span><span class="w">          </span><span class="n">HRDataText</span><span class="p">.</span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Latest HR Data: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">latestHRData</span><span class="p">;</span>
<span class="linenos">100</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">101</span>
<span class="linenos">102</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">CopyUSBDriver</span><span class="p">()</span>
<span class="linenos">103</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">104</span><span class="w">          </span><span class="kt">string</span><span class="w"> </span><span class="n">unityAssetPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Application</span><span class="p">.</span><span class="n">streamingAssetsPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;/SiUSBXp.dll&quot;</span><span class="p">;</span>
<span class="linenos">105</span><span class="w">          </span><span class="kt">string</span><span class="w"> </span><span class="n">adjacentToExePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Application</span><span class="p">.</span><span class="n">dataPath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;/../SiUSBXp.dll&quot;</span><span class="p">;</span>
<span class="linenos">106</span><span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">File</span><span class="p">.</span><span class="n">Exists</span><span class="p">(</span><span class="n">adjacentToExePath</span><span class="p">))</span>
<span class="linenos">107</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">108</span><span class="w">              </span><span class="n">File</span><span class="p">.</span><span class="n">Copy</span><span class="p">(</span><span class="n">unityAssetPath</span><span class="p">,</span><span class="w"> </span><span class="n">adjacentToExePath</span><span class="p">);</span>
<span class="linenos">109</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">110</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">111</span>
<span class="linenos">112</span><span class="w">      </span><span class="c1">/// &lt;summary&gt;</span>
<span class="linenos">113</span><span class="w">      </span><span class="c1">/// Dumping all the debug statements from DelsysAPI into the Unity&#39;s Log file, see https://docs.unity3d.com/Manual/LogFiles.html for more details.</span>
<span class="linenos">114</span><span class="w">      </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="linenos">115</span><span class="w">      </span><span class="c1">/// &lt;returns&gt; None &lt;/returns&gt;</span>
<span class="linenos">116</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">TraceWriteline</span><span class="p">(</span><span class="kt">string</span><span class="w"> </span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="kt">object</span><span class="p">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span>
<span class="linenos">117</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">118</span><span class="w">          </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;</span><span class="w"> </span><span class="n">args</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="linenos">119</span><span class="w">              </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;; &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">args</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="linenos">120</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">121</span><span class="w">          </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Delsys API:- &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">s</span><span class="p">);</span>
<span class="linenos">122</span>
<span class="linenos">123</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">124</span>
<span class="linenos">125</span><span class="w">      </span><span class="cp">#region Initialization</span>
<span class="linenos">126</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">InitializeDataSource</span><span class="p">()</span>
<span class="linenos">127</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">128</span>
<span class="linenos">129</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Creating device source . . . &quot;</span><span class="p">;</span>
<span class="linenos">130</span><span class="w">          </span><span class="k">if</span><span class="p">(</span><span class="n">key</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">license</span><span class="p">.</span><span class="n">Equals</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)){</span>
<span class="linenos">131</span><span class="w">              </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Please add your license details from the code.&quot;</span><span class="p">;</span>
<span class="linenos">132</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">133</span><span class="w">          </span><span class="kt">var</span><span class="w"> </span><span class="n">deviceSourceCreator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DeviceSourcePortable</span><span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">license</span><span class="p">);</span>
<span class="linenos">134</span><span class="w">          </span><span class="n">deviceSourceCreator</span><span class="p">.</span><span class="n">SetDebugOutputStream</span><span class="p">(</span><span class="n">TraceWriteline</span><span class="p">);</span>
<span class="linenos">135</span><span class="w">          </span><span class="n">DeviceSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">deviceSourceCreator</span><span class="p">.</span><span class="n">GetDataSource</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">SourceType</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">SourceType</span><span class="p">.</span><span class="n">TRIGNO_RF</span><span class="p">,</span><span class="w"> </span><span class="n">SourceType</span><span class="p">.</span><span class="n">TRIGNO_LINK</span><span class="w"> </span><span class="p">});</span>
<span class="linenos">136</span><span class="w">          </span><span class="n">text</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Device source created.&quot;</span><span class="p">;</span>
<span class="linenos">137</span><span class="w">          </span><span class="n">DeviceSource</span><span class="p">.</span><span class="n">Key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">;</span>
<span class="linenos">138</span><span class="w">          </span><span class="n">DeviceSource</span><span class="p">.</span><span class="n">License</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">license</span><span class="p">;</span>
<span class="linenos">139</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Loading data source . . . &quot;</span><span class="p">;</span>
<span class="linenos">140</span>
<span class="linenos">141</span><span class="w">          </span><span class="k">try</span>
<span class="linenos">142</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">143</span><span class="w">              </span><span class="n">LoadDataSource</span><span class="p">(</span><span class="n">DeviceSource</span><span class="p">);</span>
<span class="linenos">144</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">145</span><span class="w">          </span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span>
<span class="linenos">146</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">147</span><span class="w">              </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Something went wrong: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">;</span>
<span class="linenos">148</span><span class="w">              </span><span class="k">return</span><span class="p">;</span>
<span class="linenos">149</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">150</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Data source loaded and ready to Scan.&quot;</span><span class="p">;</span>
<span class="linenos">151</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">152</span>
<span class="linenos">153</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">LoadDataSource</span><span class="p">(</span><span class="n">IDelsysDevice</span><span class="w"> </span><span class="n">ds</span><span class="p">)</span>
<span class="linenos">154</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">155</span><span class="w">          </span><span class="n">PipelineController</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">AddPipeline</span><span class="p">(</span><span class="n">ds</span><span class="p">);</span>
<span class="linenos">156</span>
<span class="linenos">157</span><span class="w">          </span><span class="n">RFPipeline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineController</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">PipelineIds</span><span class="p">[</span><span class="m">0</span><span class="p">];</span>
<span class="linenos">158</span><span class="w">          </span><span class="n">TransformManager</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineController</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">PipelineIds</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">TransformManager</span><span class="p">;</span>
<span class="linenos">159</span>
<span class="linenos">160</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">ComponentScanComplete</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ComponentScanComplete</span><span class="p">;</span>
<span class="linenos">161</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">CollectionStarted</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">CollectionStarted</span><span class="p">;</span>
<span class="linenos">162</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">CollectionDataReady</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">CollectionDataReady</span><span class="p">;</span>
<span class="linenos">163</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">CollectionComplete</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">CollectionComplete</span><span class="p">;</span>
<span class="linenos">164</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">ComponentAdded</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ComponentAdded</span><span class="p">;</span>
<span class="linenos">165</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">ComponentLost</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ComponentLost</span><span class="p">;</span>
<span class="linenos">166</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">ComponentRemoved</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ComponentRemoved</span><span class="p">;</span>
<span class="linenos">167</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">168</span>
<span class="linenos">169</span><span class="w">      </span><span class="cp">#endregion</span>
<span class="linenos">170</span>
<span class="linenos">171</span><span class="w">      </span><span class="cp">#region Button Click events: clk_Scan, clk_Select, clk_Start, clk_Stop, clk_Pair</span>
<span class="linenos">172</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">clk_Scan</span><span class="p">()</span>
<span class="linenos">173</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">174</span><span class="w">          </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;Scan Clicked&quot;</span><span class="p">);</span>
<span class="linenos">175</span><span class="w">          </span><span class="k">foreach</span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">comp</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">Components</span><span class="p">)</span>
<span class="linenos">176</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">177</span><span class="w">              </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">DeselectComponentAsync</span><span class="p">(</span><span class="n">comp</span><span class="p">);</span>
<span class="linenos">178</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">179</span><span class="w">          </span><span class="c1">//Trying to search for Link components - will set link bool to false if fail</span>
<span class="linenos">180</span><span class="w">          </span><span class="k">try</span><span class="p">{</span>
<span class="linenos">181</span><span class="w">              </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoLinkManager</span><span class="p">.</span><span class="n">Components</span><span class="p">)</span>
<span class="linenos">182</span><span class="w">                  </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoLinkManager</span><span class="p">.</span><span class="n">DeselectComponentAsync</span><span class="p">(</span><span class="n">component</span><span class="p">);</span>
<span class="linenos">183</span><span class="w">                  </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Trigno Link has sensors connected.&quot;</span><span class="p">);</span>
<span class="linenos">184</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">185</span><span class="w">          </span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<span class="linenos">186</span><span class="w">              </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Trigno Link has no sensors connected.&quot;</span><span class="p">);</span>
<span class="linenos">187</span><span class="w">              </span><span class="n">usingTrignoLink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="linenos">188</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">189</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Scanning . . .&quot;</span><span class="p">;</span>
<span class="linenos">190</span><span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">Scan</span><span class="p">();</span>
<span class="linenos">191</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">192</span>
<span class="linenos">193</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">clk_Select</span><span class="p">()</span>
<span class="linenos">194</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">195</span><span class="w">          </span><span class="n">SelectSensors</span><span class="p">();</span>
<span class="linenos">196</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">197</span>
<span class="linenos">198</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">clk_Start</span><span class="p">()</span>
<span class="linenos">199</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">200</span>
<span class="linenos">201</span><span class="w">          </span><span class="c1">// The pipeline must be reconfigured before it can be started again.</span>
<span class="linenos">202</span><span class="w">          </span><span class="kt">bool</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ConfigurePipeline</span><span class="p">();</span>
<span class="linenos">203</span><span class="w">          </span><span class="k">if</span><span class="p">(</span><span class="n">success</span><span class="p">){</span>
<span class="linenos">204</span><span class="w">              </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Starting data streaming....&quot;</span><span class="p">);</span>
<span class="linenos">205</span><span class="w">              </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Starting data streaming....&quot;</span><span class="p">;</span>
<span class="linenos">206</span><span class="w">              </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">Start</span><span class="p">();</span>
<span class="linenos">207</span><span class="w">              </span><span class="n">stop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="linenos">208</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">209</span><span class="w">          </span><span class="k">else</span><span class="p">{</span>
<span class="linenos">210</span><span class="w">              </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Configuration failed. Cannot start streaming!!&quot;</span><span class="p">);</span>
<span class="linenos">211</span><span class="w">              </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Fatal error!&quot;</span><span class="p">;</span>
<span class="linenos">212</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">213</span>
<span class="linenos">214</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">215</span>
<span class="linenos">216</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">clk_Stop</span><span class="p">()</span>
<span class="linenos">217</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">218</span><span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">StopInformationStream</span><span class="p">();</span>
<span class="linenos">219</span><span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">Stop</span><span class="p">();</span>
<span class="linenos">220</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">SetActiveDataSources</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SourceType</span><span class="o">&gt;</span><span class="p">{</span><span class="n">SourceType</span><span class="p">.</span><span class="n">TRIGNO_RF</span><span class="p">,</span><span class="w"> </span><span class="n">SourceType</span><span class="p">.</span><span class="n">TRIGNO_LINK</span><span class="p">});</span>
<span class="linenos">221</span><span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">DisarmPipeline</span><span class="p">();</span>
<span class="linenos">222</span><span class="w">          </span><span class="n">PipelineController</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">RemovePipeline</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
<span class="linenos">223</span>
<span class="linenos">224</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">225</span>
<span class="linenos">226</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">clk_Pair</span><span class="p">()</span>
<span class="linenos">227</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">228</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Awaiting a sensor pair . . .&quot;</span><span class="p">;</span>
<span class="linenos">229</span><span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">AddTrignoComponent</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">System</span><span class="p">.</span><span class="n">Threading</span><span class="p">.</span><span class="n">CancellationToken</span><span class="p">());</span>
<span class="linenos">230</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">231</span>
<span class="linenos">232</span><span class="w">      </span><span class="cp">#endregion</span>
<span class="linenos">233</span>
<span class="linenos">234</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">SelectSensors</span><span class="p">()</span>
<span class="linenos">235</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">236</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Selecting all sensors . . .&quot;</span><span class="p">;</span>
<span class="linenos">237</span>
<span class="linenos">238</span><span class="w">          </span><span class="c1">// Select every component we found and didn&#39;t filter out.</span>
<span class="linenos">239</span><span class="w">          </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">Components</span><span class="p">)</span>
<span class="linenos">240</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">241</span><span class="w">              </span><span class="kt">bool</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">SelectComponentAsync</span><span class="p">(</span><span class="n">component</span><span class="p">).</span><span class="n">Result</span><span class="p">;</span>
<span class="linenos">242</span><span class="w">              </span><span class="k">if</span><span class="p">(</span><span class="n">success</span><span class="p">){</span>
<span class="linenos">243</span><span class="w">                  </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">component</span><span class="p">.</span><span class="n">FriendlyName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; selected!&quot;</span><span class="p">;</span>
<span class="linenos">244</span><span class="w">              </span><span class="p">}</span>
<span class="linenos">245</span><span class="w">              </span><span class="k">else</span><span class="p">{</span>
<span class="linenos">246</span><span class="w">                  </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Could not select sensor!!&quot;</span><span class="p">;</span>
<span class="linenos">247</span><span class="w">              </span><span class="p">}</span>
<span class="linenos">248</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">249</span><span class="w">          </span><span class="c1">//Now doing search for link components if link is enabled.</span>
<span class="linenos">250</span><span class="w">          </span><span class="k">if</span><span class="p">(</span><span class="n">usingTrignoLink</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">){</span>
<span class="linenos">251</span><span class="w">              </span><span class="k">foreach</span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoLinkManager</span><span class="p">.</span><span class="n">Components</span><span class="p">){</span>
<span class="linenos">252</span><span class="w">                  </span><span class="kt">bool</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoLinkManager</span><span class="p">.</span><span class="n">SelectComponentAsync</span><span class="p">(</span><span class="n">component</span><span class="p">).</span><span class="n">Result</span><span class="p">;</span>
<span class="linenos">253</span><span class="w">                  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">success</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">){</span>
<span class="linenos">254</span><span class="w">                      </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">component</span><span class="p">.</span><span class="n">FriendlyName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;selected!&quot;</span><span class="p">;</span>
<span class="linenos">255</span><span class="w">                  </span><span class="p">}</span><span class="k">else</span><span class="p">{</span>
<span class="linenos">256</span><span class="w">                      </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Could not select sensor!!&quot;</span><span class="p">;</span>
<span class="linenos">257</span><span class="w">                  </span><span class="p">}</span>
<span class="linenos">258</span><span class="w">              </span><span class="p">}</span>
<span class="linenos">259</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">260</span><span class="w">          </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="linenos">261</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">262</span>
<span class="linenos">263</span>
<span class="linenos">264</span><span class="w">      </span><span class="c1">/// &lt;summary&gt;</span>
<span class="linenos">265</span><span class="w">      </span><span class="c1">/// Configures the input and output of the pipeline.</span>
<span class="linenos">266</span><span class="w">      </span><span class="c1">/// &lt;/summary&gt;</span>
<span class="linenos">267</span><span class="w">      </span><span class="c1">/// &lt;returns&gt;&lt;/returns&gt;</span>
<span class="linenos">268</span><span class="w">      </span><span class="k">private</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nf">ConfigurePipeline</span><span class="p">()</span>
<span class="linenos">269</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">270</span><span class="w">          </span><span class="kt">var</span><span class="w"> </span><span class="n">inputConfiguration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TrignoDsConfig</span><span class="p">();</span>
<span class="linenos">271</span>
<span class="linenos">272</span><span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">PortableIoc</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">CanResolve</span><span class="o">&lt;</span><span class="n">TrignoDsConfig</span><span class="o">&gt;</span><span class="p">())</span>
<span class="linenos">273</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">274</span><span class="w">              </span><span class="n">PortableIoc</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">Unregister</span><span class="o">&lt;</span><span class="n">TrignoDsConfig</span><span class="o">&gt;</span><span class="p">();</span>
<span class="linenos">275</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">276</span>
<span class="linenos">277</span><span class="w">          </span><span class="n">PortableIoc</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">Register</span><span class="p">(</span><span class="n">ioc</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">inputConfiguration</span><span class="p">);</span>
<span class="linenos">278</span>
<span class="linenos">279</span><span class="w">          </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">somecomp</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">Components</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">State</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">SelectionState</span><span class="p">.</span><span class="n">Allocated</span><span class="p">))</span>
<span class="linenos">280</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">281</span><span class="w">              </span><span class="n">somecomp</span><span class="p">.</span><span class="n">SelectSampleMode</span><span class="p">(</span><span class="n">somecomp</span><span class="p">.</span><span class="n">DefaultMode</span><span class="p">);</span>
<span class="linenos">282</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">283</span>
<span class="linenos">284</span><span class="w">          </span><span class="k">try</span>
<span class="linenos">285</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">286</span><span class="w">              </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Applying Input configurations&quot;</span><span class="p">);</span>
<span class="linenos">287</span><span class="w">              </span><span class="kt">bool</span><span class="w"> </span><span class="n">success_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">ApplyInputConfigurations</span><span class="p">(</span><span class="n">inputConfiguration</span><span class="p">);</span>
<span class="linenos">288</span><span class="w">              </span><span class="k">if</span><span class="p">(</span><span class="n">success_1</span><span class="p">){</span>
<span class="linenos">289</span><span class="w">                  </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="s">&quot;Applied input configuration&quot;</span><span class="p">;</span>
<span class="linenos">290</span><span class="w">                  </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Applied input configuration&quot;</span><span class="p">);</span>
<span class="linenos">291</span><span class="w">              </span><span class="p">}</span>
<span class="linenos">292</span><span class="w">              </span><span class="k">else</span><span class="p">{</span>
<span class="linenos">293</span><span class="w">                  </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Input configurations failed&quot;</span><span class="p">;</span>
<span class="linenos">294</span><span class="w">                  </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Input configurations failed&quot;</span><span class="p">);</span>
<span class="linenos">295</span><span class="w">              </span><span class="p">}</span>
<span class="linenos">296</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">297</span><span class="w">          </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">exception</span><span class="p">)</span>
<span class="linenos">298</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">299</span><span class="w">              </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">exception</span><span class="p">.</span><span class="n">Message</span><span class="p">;</span>
<span class="linenos">300</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">301</span><span class="w">          </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">RunTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">int</span><span class="p">.</span><span class="n">MaxValue</span><span class="p">;</span>
<span class="linenos">302</span>
<span class="linenos">303</span><span class="w">          </span><span class="n">TransformConnector</span><span class="w"> </span><span class="n">transformConnector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TransformConnector</span><span class="p">(</span><span class="n">RFPipeline</span><span class="p">);</span>
<span class="linenos">304</span><span class="w">          </span><span class="n">OutputConfig</span><span class="w"> </span><span class="n">outputConfig</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">transformConnector</span><span class="p">.</span><span class="n">SetupTransforms</span><span class="p">();</span>
<span class="linenos">305</span>
<span class="linenos">306</span><span class="w">          </span><span class="kt">bool</span><span class="w"> </span><span class="n">success_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">ApplyOutputConfigurations</span><span class="p">(</span><span class="n">outputConfig</span><span class="p">);</span>
<span class="linenos">307</span><span class="w">          </span><span class="k">if</span><span class="p">(</span><span class="n">success_2</span><span class="p">){</span>
<span class="linenos">308</span><span class="w">              </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Applied Output configurations&quot;</span><span class="p">;</span>
<span class="linenos">309</span><span class="w">              </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Applied Output configurations&quot;</span><span class="p">);</span>
<span class="linenos">310</span><span class="w">              </span><span class="k">return</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="linenos">311</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">312</span><span class="w">          </span><span class="k">else</span><span class="p">{</span>
<span class="linenos">313</span><span class="w">              </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Output configurations failed!&quot;</span><span class="p">;</span>
<span class="linenos">314</span><span class="w">              </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Output configurations failed!&quot;</span><span class="p">);</span>
<span class="linenos">315</span><span class="w">              </span><span class="k">return</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="linenos">316</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">317</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">318</span>
<span class="linenos">319</span>
<span class="linenos">320</span>
<span class="linenos">321</span><span class="w">      </span><span class="cp">#region Collection Callbacks -- Data Ready, Colleciton Started, and Collection Complete</span>
<span class="linenos">322</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">CollectionDataReady</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">ComponentDataReadyEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="linenos">323</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">324</span><span class="w">          </span><span class="c1">//Channel based list of data for this frame interval</span>
<span class="linenos">325</span><span class="w">          </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="p">();</span>
<span class="linenos">326</span>
<span class="linenos">327</span><span class="w">          </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">328</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">329</span><span class="w">              </span><span class="c1">// Loops through each connected sensor</span>
<span class="linenos">330</span><span class="w">              </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">331</span><span class="w">              </span><span class="p">{</span>
<span class="linenos">332</span><span class="w">                  </span><span class="c1">// Loops through each channel for a sensor</span>
<span class="linenos">333</span><span class="w">                  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">334</span><span class="w">                  </span><span class="p">{</span>
<span class="linenos">335</span><span class="w">                      </span><span class="n">data</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">);</span>
<span class="linenos">336</span><span class="w">                      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">&lt;</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">k2</span><span class="o">++</span><span class="p">){</span>
<span class="linenos">337</span><span class="w">                          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="c1">//Heart Rate Sensor Index</span>
<span class="linenos">338</span><span class="w">                          </span><span class="p">{</span>
<span class="linenos">339</span><span class="w">                              </span><span class="n">latestHRData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
<span class="linenos">340</span><span class="w">                          </span><span class="p">}</span>
<span class="linenos">341</span><span class="w">                          </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="c1">//Avanti Sensor Index</span>
<span class="linenos">342</span><span class="w">                          </span><span class="p">{</span>
<span class="linenos">343</span><span class="w">                              </span><span class="n">latestEMGData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
<span class="linenos">344</span><span class="w">                          </span><span class="p">}</span>
<span class="linenos">345</span><span class="w">                          </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">]);</span>
<span class="linenos">346</span><span class="w">                      </span><span class="p">}</span>
<span class="linenos">347</span><span class="w">                  </span><span class="p">}</span>
<span class="linenos">348</span><span class="w">              </span><span class="p">}</span>
<span class="linenos">349</span>
<span class="linenos">350</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">351</span>
<span class="linenos">352</span><span class="w">          </span><span class="c1">//Add frame data to entire collection data buffer</span>
<span class="linenos">353</span><span class="w">          </span><span class="n">AllCollectionData</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="linenos">354</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AllCollectionData</span><span class="p">.</span><span class="n">Count</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
<span class="linenos">355</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">356</span>
<span class="linenos">357</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">CollectionStarted</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">DelsysAPI</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">CollectionStartedEvent</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="linenos">358</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">359</span><span class="w">          </span><span class="n">AllCollectionData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;&gt;</span><span class="p">();</span>
<span class="linenos">360</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CollectionStarted event triggered!&quot;</span><span class="p">;</span>
<span class="linenos">361</span><span class="w">          </span><span class="kt">var</span><span class="w"> </span><span class="n">comps</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PipelineController</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">PipelineIds</span><span class="p">[</span><span class="m">0</span><span class="p">].</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">Components</span><span class="p">;</span>
<span class="linenos">362</span>
<span class="linenos">363</span><span class="w">          </span><span class="c1">// Refresh the counters for display.</span>
<span class="linenos">364</span><span class="w">          </span><span class="n">TotalDataPoints</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="linenos">365</span><span class="w">          </span><span class="n">TotalLostPackets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="linenos">366</span>
<span class="linenos">367</span><span class="w">          </span><span class="c1">// Recreate the list of data channels for recording</span>
<span class="linenos">368</span><span class="w">          </span><span class="kt">int</span><span class="w"> </span><span class="n">totalChannels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="linenos">369</span><span class="w">          </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">comps</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">370</span><span class="w">          </span><span class="p">{</span>
<span class="linenos">371</span><span class="w">              </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">comps</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">TrignoChannels</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">372</span><span class="w">              </span><span class="p">{</span>
<span class="linenos">373</span><span class="w">                  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">totalChannels</span><span class="p">)</span>
<span class="linenos">374</span><span class="w">                  </span><span class="p">{</span>
<span class="linenos">375</span><span class="w">                      </span><span class="n">Data</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">());</span>
<span class="linenos">376</span><span class="w">                  </span><span class="p">}</span>
<span class="linenos">377</span><span class="w">                  </span><span class="k">else</span>
<span class="linenos">378</span><span class="w">                  </span><span class="p">{</span>
<span class="linenos">379</span><span class="w">                      </span><span class="n">Data</span><span class="p">[</span><span class="n">totalChannels</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">();</span>
<span class="linenos">380</span><span class="w">                  </span><span class="p">}</span>
<span class="linenos">381</span><span class="w">                  </span><span class="n">totalChannels</span><span class="o">++</span><span class="p">;</span>
<span class="linenos">382</span><span class="w">              </span><span class="p">}</span>
<span class="linenos">383</span><span class="w">          </span><span class="p">}</span>
<span class="linenos">384</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">385</span>
<span class="linenos">386</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">CollectionComplete</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">DelsysAPI</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">CollectionCompleteEvent</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="linenos">387</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">388</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;CollectionComplete event triggered!&quot;</span><span class="p">;</span>
<span class="linenos">389</span><span class="w">          </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">DisarmPipeline</span><span class="p">();</span>
<span class="linenos">390</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">391</span>
<span class="linenos">392</span><span class="w">      </span><span class="cp">#endregion</span>
<span class="linenos">393</span>
<span class="linenos">394</span><span class="w">      </span><span class="cp">#region Component Events: Scan complete, Component Added, Lost, Removed</span>
<span class="linenos">395</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ComponentScanComplete</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">DelsysAPI</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">ComponentScanCompletedEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="linenos">396</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">397</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Scan Complete&quot;</span><span class="p">;</span>
<span class="linenos">398</span>
<span class="linenos">399</span><span class="w">          </span><span class="k">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="linenos">400</span><span class="w">          </span><span class="n">pair</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">;</span>
<span class="linenos">401</span>
<span class="linenos">402</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">403</span>
<span class="linenos">404</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ComponentAdded</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">ComponentAddedEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="linenos">405</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">406</span>
<span class="linenos">407</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">408</span>
<span class="linenos">409</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ComponentLost</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">ComponentLostEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="linenos">410</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">411</span><span class="w">          </span><span class="kt">int</span><span class="w"> </span><span class="n">sensorStickerNumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoRfManager</span><span class="p">.</span><span class="n">Components</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">sensor</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">Id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Component</span><span class="p">.</span><span class="n">Id</span><span class="p">).</span><span class="n">First</span><span class="p">().</span><span class="n">PairNumber</span><span class="p">;</span>
<span class="linenos">412</span><span class="w">          </span><span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="s">&quot;It appears sensor &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sensorStickerNumber</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; has lost connection. Please power cycle this sensor.&quot;</span><span class="p">);</span>
<span class="linenos">413</span><span class="w">          </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;It appears sensor &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sensorStickerNumber</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot; has lost connection&quot;</span><span class="p">;</span>
<span class="linenos">414</span>
<span class="linenos">415</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">416</span>
<span class="linenos">417</span><span class="w">      </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">ComponentRemoved</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">ComponentRemovedEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="linenos">418</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">419</span>
<span class="linenos">420</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">421</span>
<span class="linenos">422</span><span class="w">      </span><span class="cp">#endregion</span>
<span class="linenos">423</span>
<span class="linenos">424</span><span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>The first change made to the code from the original example script was the addition of the  lines <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">TMPro;</span></code> and <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">DelsysAPI.Components.TrignoLink</span></code>. These lines add necessary functionality for Unity’s updated text system and the Trigno Link, respectively.</p>
<p>After adding TMPro, change the line <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">Text</span> <span class="pre">APIStatusText,</span> <span class="pre">TestText,</span> <span class="pre">PipelineState;</span></code> to <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">TMP_Text</span> <span class="pre">APIStatusText,</span> <span class="pre">TestText,</span> <span class="pre">PipelineState;</span></code>. This will convert the text variables used to the updated text system.</p>
<p>On the same line as the previous modification, add <code class="docutils literal notranslate"><span class="pre">EMGDataText</span></code> and <code class="docutils literal notranslate"><span class="pre">HRDataText</span></code>. The result should look as follows: <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">TMP_Text</span> <span class="pre">APIStatusText,</span> <span class="pre">TestText,</span> <span class="pre">PipelineState,</span> <span class="pre">EMGDataText,</span> <span class="pre">HRDataText;</span></code>. These two variables will be used to display the latest EMG and HR data on screen.</p>
<p>The next modification that was made was the creation of the boolean variable <code class="docutils literal notranslate"><span class="pre">usingTrignoLink</span></code>. This variable lets the script know whether or not a Trigno Link is being used. In the start method, its default value is set to true. Later, you will see that the scan function can change this value.</p>
<p>Also in the start method, the lines:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="n">ScanButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">FindGameObjectWithTag</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;ScanButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">ScanButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Scan</span><span class="p">);</span>

<span class="n">StartButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">FindGameObjectWithTag</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;StartButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">StartButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Start</span><span class="p">);</span>

<span class="n">StopButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">FindGameObjectWithTag</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;StopButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">StopButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Stop</span><span class="p">);</span>

<span class="n">SelectButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">FindGameObjectWithTag</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;SelectButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">SelectButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Select</span><span class="p">);</span>

<span class="n">PairButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">FindGameObjectWithTag</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;PairButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">PairButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Pair</span><span class="p">);</span>
</pre></div>
</div>
<p>are changed to:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="n">ScanButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;ScanButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">ScanButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Scan</span><span class="p">);</span>

<span class="n">StartButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;StartButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">StartButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Start</span><span class="p">);</span>

<span class="n">StopButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;StopButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">StopButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Stop</span><span class="p">);</span>

<span class="n">SelectButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;SelectButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">SelectButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Select</span><span class="p">);</span>

<span class="n">PairButton</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GameObject</span><span class="p">.</span><span class="n">Find</span><span class="p">(</span><span class="s">&quot;PairButton&quot;</span><span class="p">).</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">Button</span><span class="o">&gt;</span><span class="p">();</span>
<span class="n">PairButton</span><span class="p">.</span><span class="n">onClick</span><span class="p">.</span><span class="n">AddListener</span><span class="p">((</span><span class="n">UnityEngine</span><span class="p">.</span><span class="n">Events</span><span class="p">.</span><span class="n">UnityAction</span><span class="p">)</span><span class="w"> </span><span class="k">this</span><span class="p">.</span><span class="n">clk_Pair</span><span class="p">);</span>
</pre></div>
</div>
<p>This is because the Unity tag system used in the <code class="docutils literal notranslate"><span class="pre">FindGameObjectWithTag</span></code> method is outdated and no longer functions. Simply changing each instance of this function to the newer <code class="docutils literal notranslate"><span class="pre">Find</span></code> method will fix this.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must name the <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> s the same name as given to the Find method. For example, the button you want to use as a “Stop” button must be named “StopButton” for it to be found by <code class="docutils literal notranslate"><span class="pre">Find</span></code>. You can change the argument of <code class="docutils literal notranslate"><span class="pre">Find</span></code> to whatever you like, but just know that the corresponding <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> must share that name, and it is case-sensitive.</p>
</div>
<p>Next, in the <code class="docutils literal notranslate"><span class="pre">Update</span></code> method, add the lines <code class="docutils literal notranslate"><span class="pre">EMGDataText.text</span> <span class="pre">=</span> <span class="pre">&quot;Latest</span> <span class="pre">EMG</span> <span class="pre">Data:</span> <span class="pre">&quot;</span> <span class="pre">+</span> <span class="pre">latestEMGData;</span></code> and <code class="docutils literal notranslate"><span class="pre">HRDataText.text</span> <span class="pre">=</span> <span class="pre">&quot;Latest</span> <span class="pre">HR</span> <span class="pre">Data:</span> <span class="pre">&quot;</span> <span class="pre">+</span> <span class="pre">latestHRData;</span></code>. Doing this makes sure that Unity updates the on-screen text displaying the latest data every frame.</p>
<p>Now getting into more substantial changes, in the function <code class="docutils literal notranslate"><span class="pre">InitializeDataSource</span></code>, the line <code class="docutils literal notranslate"><span class="pre">DeviceSource</span> <span class="pre">=</span> <span class="pre">deviceSourceCreator.GetDataSource(SourceType.TRIGNO_RF);</span></code> must be changed to <code class="docutils literal notranslate"><span class="pre">DeviceSource</span> <span class="pre">=</span> <span class="pre">deviceSourceCreator.GetDataSource(new</span> <span class="pre">SourceType[2]</span> <span class="pre">{</span> <span class="pre">SourceType.TRIGNO_RF,</span> <span class="pre">SourceType.TRIGNO_LINK</span> <span class="pre">});</span></code> . This is what tells the API to search for Trigno Link components alongside the regular RF ones.</p>
<p>Another important change to make is to the <code class="docutils literal notranslate"><span class="pre">clk_Scan</span></code> method. Here, add a new try-catch block right after the foreach loop but before the assigning variable <code class="docutils literal notranslate"><span class="pre">text</span></code> to “scanning” and awaiting the scan. The try-catch should be composed of the following:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">{</span>
<span class="w">  </span><span class="k">foreach</span><span class="w"> </span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoLinkManager</span><span class="p">.</span><span class="n">Components</span><span class="p">)</span>
<span class="w">      </span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoLinkManager</span><span class="p">.</span><span class="n">DeselectComponentAsync</span><span class="p">(</span><span class="n">component</span><span class="p">);</span>
<span class="w">      </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Trigno Link has sensors connected.&quot;</span><span class="p">);</span>
<span class="p">}</span>
<span class="w">  </span><span class="k">catch</span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">){</span>
<span class="w">  </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="s">&quot;Trigno Link has no sensors connected.&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="n">usingTrignoLink</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This block of code tries to check for Trigno Link components connected to the system. If it finds them, it adds them to the list of components. If none are found, the system sets the boolean <code class="docutils literal notranslate"><span class="pre">usingTrignoLink</span></code> to false, and the Trigno Link is not considered connected.</p>
<p>Next, in the <code class="docutils literal notranslate"><span class="pre">clk_stop</span></code> method, add the following four lines of code:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">StopInformationStream</span><span class="p">();</span>
<span class="n">RFPipeline</span><span class="p">.</span><span class="n">SetActiveDataSources</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">SourceType</span><span class="o">&gt;</span><span class="p">{</span><span class="n">SourceType</span><span class="p">.</span><span class="n">TRIGNO_RF</span><span class="p">,</span><span class="w"> </span><span class="n">SourceType</span><span class="p">.</span><span class="n">TRIGNO_LINK</span><span class="p">});</span>
<span class="k">await</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">DisarmPipeline</span><span class="p">();</span>
<span class="n">PipelineController</span><span class="p">.</span><span class="n">Instance</span><span class="p">.</span><span class="n">RemovePipeline</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
</pre></div>
</div>
<p>The purpose of these lines is to ensure a smooth disconnection of the devices connected to the API, now including the Trigno Link.</p>
<p>An important modification to make is to the <code class="docutils literal notranslate"><span class="pre">SelectSensors</span></code> method. Here, you are going to want to add an additional foreach loop that only runs if the Trigno Link is being used (as determined by the  value of <code class="docutils literal notranslate"><span class="pre">usingTrignoLink</span></code>). This loop will search through the Trigno Link’s connected sensors and select each of them for data collection. The code should be written as follows, and should be placed right below the outermost closing bracket of the first loop, before <code class="docutils literal notranslate"><span class="pre">start</span></code> is set to true:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="p">(</span><span class="n">usingTrignoLink</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">){</span>
<span class="w">    </span><span class="k">foreach</span><span class="p">(</span><span class="kt">var</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoLinkManager</span><span class="p">.</span><span class="n">Components</span><span class="p">){</span>
<span class="w">        </span><span class="kt">bool</span><span class="w"> </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RFPipeline</span><span class="p">.</span><span class="n">TrignoLinkManager</span><span class="p">.</span><span class="n">SelectComponentAsync</span><span class="p">(</span><span class="n">component</span><span class="p">).</span><span class="n">Result</span><span class="p">;</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">success</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="k">true</span><span class="p">){</span>
<span class="w">            </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">component</span><span class="p">.</span><span class="n">FriendlyName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;selected!&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="k">else</span><span class="p">{</span>
<span class="w">            </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Could not select sensor!!&quot;</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Lastly, In the <code class="docutils literal notranslate"><span class="pre">CollectionDataReady</span></code> method, add the following code snippet to the innermost for loop:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="c1">//Heart Rate Sensor Index</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="n">latestHRData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                    </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="c1">//Avanti Sensor Index</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="n">latestEMGData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">                    </span><span class="p">}</span>
</pre></div>
</div>
<p>The result should be:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">CollectionDataReady</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">ComponentDataReadyEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">//Channel based list of data for this frame interval</span>
<span class="w">    </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="p">();</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Loops through each connected sensor</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Loops through each channel for a sensor</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">            </span><span class="p">{</span>
<span class="w">                </span><span class="n">data</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">);</span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">&lt;</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">k2</span><span class="o">++</span><span class="p">){</span>
<span class="w">                    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="c1">//Heart Rate Sensor Index</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="n">latestHRData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                    </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="c1">//Avanti Sensor Index</span>
<span class="w">                    </span><span class="p">{</span>
<span class="w">                        </span><span class="n">latestEMGData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                    </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">]);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">//Add frame data to entire collection data buffer</span>
<span class="w">    </span><span class="n">AllCollectionData</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">    </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AllCollectionData</span><span class="p">.</span><span class="n">Count</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The purpose in doing this is to update the latest heart rate data and the latest EMG data each time a new data packet is recieved.  This ensures that the data displayed is the newest available.</p>
<p>Now that all of the modifications have been made, save your script using <em>ctrl + S</em> on Windows, or <em>cmd + S</em> on Mac, and ensure that Unity does not display any compiler errors. If you encounter errors, you can always copy and paste the entire script from this page and overwrite yours, since the script here is known to work. You are now ready to move on to adding the necessary <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> s to the project.</p>
</section>
<section id="adding-gameobjects">
<h3>Adding GameObjects<a class="headerlink" href="#adding-gameobjects" title="Link to this heading"></a></h3>
<a class="reference internal image-reference" href="../../_images/added_game_objects.png"><img alt="An Image of the layout for the project." src="../../_images/added_game_objects.png" style="width: 1000px;" /></a>
<p>If you are building from the example script, you are going to need a few <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> s in order to create the scene for your application. Please create the following:</p>
<ul class="simple">
<li><p>A Canvas Object: This will be the parent object for your buttons and text, and defines what the screen shows. This is added through the UI section of the object creation dropdown, and creates an Event System with it.</p></li>
<li><p>An Event System Object: This is used to make your UI elements interactable. Again, this should be created alongside your canvas.</p></li>
<li><p>A Main Camera: This is included with the sample scene, and it just defines the view of the game. It should be created for you already.</p></li>
<li><p>A Unity Example Object: This is the first object you must add yourself, and it is the <strong>most</strong> important object for the integration. It should be an Empty object, and should have the modified Example Script attached as a component.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>TMP Buttons are set up slightly differently than the ones you used in earlier modules. For these, the text for the button is contained in a child Text(TMP) object. TO change the text displayed on the button, got to this child object and change the text input component.</p>
</div>
<ul class="simple">
<li><p>A Scan Button: This will be used to scan for sensors connected to the base station and the Trigno Link. Ensure that the name for this <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> matches the one given as argument in the <code class="docutils literal notranslate"><span class="pre">Find</span></code> function for the <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> ScanButton in the Example Script. If you have not changed the arguments, the name should be “ScanButton”.</p></li>
<li><p>A Start Button: This will be used to start collecting data once all of the sensors have been connected. Ensure that the name for this <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> matches the one given as argument in the <code class="docutils literal notranslate"><span class="pre">Find</span></code> function for the <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> StartButton in the Example Script. If you have not changed the arguments, the name should be “StartButton”.</p></li>
<li><p>A Pair Button: This will be used to pair sensors to the base station that were not previously paired in Trigno Discover. A sensor <em>must</em> be paired to the system before it can be picked up by a scan. Ensure that the name for this <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> matches the one given as argument in the <code class="docutils literal notranslate"><span class="pre">Find</span></code> function for the <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> PairButton in the Example Script. If you have not changed the arguments, the name should be “PairButton”.</p></li>
<li><p>A Stop Button: This will be used to disarm the Delsys API pipeline and safely stop data collection once clicked.  Ensure that the name for this <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> matches the one given as argument in the <code class="docutils literal notranslate"><span class="pre">Find</span></code> function for the <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> StopButton in the Example Script. If you have not changed the arguments, the name should be “StopButton”.</p></li>
<li><p>A Select Button: This wil be used after the scan button to select every sensor found by the scan, and must be used before clicking the start button. Ensure that the name for this <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> matches the one given as argument in the <code class="docutils literal notranslate"><span class="pre">Find</span></code> function for the <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> SelectButton in the Example Script. If you have not changed the arguments, the name should be “SelectButton”.</p></li>
</ul>
<p>These five buttons provide the core functionality for the API, but there are two additional <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> s you should add that can provide additional information about the API’s status. These should both be Text Mesh Pro Text objects. They are as follows:</p>
<ul class="simple">
<li><p>An API Status Text: This will display the current status of the API in real-time, so you an get a better idea of what state it’s in while your application is running. You will need to select the Unity Example object, and in the script component section of the inspector, drag and drop the API status into the “API Status Text” slot. You will do the same for the following objects as well.</p></li>
<li><p>A Pipeline State Text: This will display the current state of the pipeline, and whether or not the base station is properly connected. As with the previous object, assign this object to its respective slot in the script component of the Unity Example object.</p></li>
<li><p>An HR Data Text: This will display the latest HR data received from the sensor.</p></li>
<li><p>An EMG Data Text: This will display the latest EMG data received from the sensor.</p></li>
</ul>
<p>At the end of the object creation, your object hierarchy should look like the following:</p>
<a class="reference internal image-reference" href="../../_images/2d_hierachy.png"><img alt="An Image of the project's object hierarchy containing the Canvas, Event System, Main Camera, Unity Example, Scan Button, Pair Button, Start Button, Stop Button, Select Button,  API Status Text, and Pipeline State Text ``GameObject`` s. The Scan Button, Pair Button, Start Button, Stop Button, Select Button,  API Status Text, Pipeline State Text, HR Data Text, and EMG Data Text are all children of the Canvas." src="../../_images/2d_hierachy.png" style="width: 800px;" /></a>
<p>And, your Unity Example Script Object’s script component should have the following filled in for it’s public variable slots. You can drag and drop any of the objects that are missing or incorrectly placed in the slots from the object hierarchy into the slots:</p>
<a class="reference internal image-reference" href="../../_images/example_script_inspector.png"><img alt="An Image of the Unity Example Object's inspector window with the Scan Button assigned to ``ScanButton`` , the Start Button assigned to ``StartButton`` , the Stop Button assigned to ``StopButton`` , the Select Button assigned to ``SelectButton`` , the Pair Button assigned to ``PairButton`` , the API Status Text assigned to ``API Status`` , and the Pipeline State assigned to ``PipelineState`` ." src="../../_images/example_script_inspector.png" style="width: 800px;" /></a>
<p>Make sure to move all of the text and button objectws so that they are not overlapping each other. You have now created all the necessary <code class="docutils literal notranslate"><span class="pre">GameObject</span></code> s for this project, and are ready to run it and begin running your project.</p>
</section>
<section id="running-the-application">
<h3>Running the Application<a class="headerlink" href="#running-the-application" title="Link to this heading"></a></h3>
<div class="video_wrapper" style="">
<iframe allowfullscreen="true" src="https://www.youtube.com/embed/kMafpMTUzn0" style="border: 0; height: 345px; width: 560px">
</iframe></div><p><strong>[Click on the above video for our YouTube tutorial on Trigno Link Data Collection.]</strong></p>
<p>Now that you have the application properly set up and know how the data is being read, you are ready to actually run the application you’ve created. Follow the steps below to do so:</p>
<ol class="arabic simple">
<li><p>Connect your Trigno Base Station to your computer via USB, and ensure it’s power supply is connected to an outlet.</p></li>
<li><p>Connect your Trigno Link to your computer via USB.</p></li>
<li><p>Press the Play Button in the top-center of the Unity editor and ensure that the API Status is displayed as “Data source loaded and ready to Scan.” and the Pipeline State is displayed as “Off”.</p></li>
<li><p>Pull out an Avanti sensor from the base station and press it against a magnet to put it in scanning mode. Remember you need at least one Avanti sensor active to use the Link.</p></li>
<li><p>Turn on your Trigno Link compatible sensor and put it in scanning mode.</p></li>
<li><p>In Unity, select the Scan Button and wait for the system to pick up the powered on sensors. (You can check the Unity Console to see if they were found.)</p></li>
<li><p>After scanning is complete, press the Select Button. Make sure that all the sensors were selected. (again, you can use the Unity Console to check this.)</p></li>
<li><p>Click the Start Button. If you check the Console, you should see all of the data being printed out from the sensors in real-time. Note that sensors may have different sampling rates, so data may come at different times. If you have accessed the data anywhere else, you should be seeing its effects now.</p></li>
<li><p>When you are done collecting data, click the Stop Button. While the application is still running, you can access all of the data from the <code class="docutils literal notranslate"><span class="pre">AllCollectionData</span></code> variable.</p></li>
<li><p>Return the sensors to the base station or power them off. You have successfully collected data using the Trigno Link and Unity!</p></li>
</ol>
</section>
</section>
<section id="additional-information">
<h2>Additional Information<a class="headerlink" href="#additional-information" title="Link to this heading"></a></h2>
<section id="collecting-sensor-data-in-non-real-time">
<h3>Collecting Sensor Data in Non-Real Time<a class="headerlink" href="#collecting-sensor-data-in-non-real-time" title="Link to this heading"></a></h3>
<p>There are two ways to easily access the data collected from using the API. The first method is for non-real-time data collection. You will notice that there is a variable in the modified example script you made called <code class="docutils literal notranslate"><span class="pre">List&lt;List&lt;List&lt;double&gt;&gt;&gt;</span> <span class="pre">AllCollectionData</span></code> . This list is filled with the data collected during real-time collection. Once data is no longer collected, you can read from this list to access the collected data.  Notice that this list is a list of lists of lists of doubles. The outermost list contains the components connected to the system (the sensors), the first inner list contains the channels for each component, so if your sensor reads multiple types of data at once you can access all of it. The innermost list contains the actual data for the specific sensors specified channel. So for instance, if I only had one Avanti EMG connected and wanted to read the EMG data from it, I could access the data with <code class="docutils literal notranslate"><span class="pre">AllCollectionData[0][0]</span></code> . This would return the list of data contained within the first sensor, and in its first channel. If I were looking for a specific piece of data at, for example, time stamp 70, I could access that specific data with <code class="docutils literal notranslate"><span class="pre">AllCollectionData[0][0][69]</span></code> . Remember that C# starts indexing at zero, so your timestamp will be offset by one. You can access this data in a separate script by modifying the declaration of the variable in the Unity Example script. Unchanged, the declaration is <code class="docutils literal notranslate"><span class="pre">List&lt;List&lt;List&lt;double&gt;&gt;&gt;</span> <span class="pre">AllCollectionData</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">List&lt;List&lt;List&lt;double&gt;&gt;&gt;();</span></code> . By simply adding <code class="docutils literal notranslate"><span class="pre">public</span></code> in front of the declaration, you can make the variable accessible to other scripts. This should look like <code class="docutils literal notranslate"><span class="pre">public</span> <span class="pre">List&lt;List&lt;List&lt;double&gt;&gt;&gt;</span> <span class="pre">AllCollectionData</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">List&lt;List&lt;List&lt;double&gt;&gt;&gt;();</span></code> . To access this in another script, you can use the following code block as a template:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="c1">//first create a GameObject the script whose data you&#39;re trying to access is attached to</span>
<span class="k">public</span><span class="w"> </span><span class="n">GameObject</span><span class="w"> </span><span class="n">ScriptHolder</span><span class="p">;</span>
<span class="c1">//then define the script you are looking for (In our case, type_of_script would be UnityExample, but in other cases it will be the name of the script;s class)</span>
<span class="k">private</span><span class="w"> </span><span class="n">type_of_script</span><span class="w"> </span><span class="n">ExampleScript</span><span class="p">;</span>
<span class="c1">//last, define where to store the data. Must be same type as the data. If you don&#39;t know what type it is, you can use &quot;var&quot; and C# will auto-assign its type;</span>
<span class="kt">var</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>

<span class="c1">//then, in start function get the script component from the GameObject</span>
<span class="k">private</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Start</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">ExampleScript</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ScriptHolder</span><span class="p">.</span><span class="n">GetComponent</span><span class="o">&lt;</span><span class="n">type_of_script</span><span class="o">&gt;</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">//to access the data use this line of code. In or case, data_to_access would be AllCollectionData. You can also change the data this way too, so be careful!</span>
<span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ExampleScript</span><span class="p">.</span><span class="n">data_to_access</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="collecting-sensor-data-in-real-time">
<h3>Collecting Sensor Data in Real Time<a class="headerlink" href="#collecting-sensor-data-in-real-time" title="Link to this heading"></a></h3>
<p>To access the data in real-time, as it comes in from the sensor, you need to get the data at its source. The easiest way to do this is to modify the <code class="docutils literal notranslate"><span class="pre">CollectionDataReady</span></code> method in your Unity Example script. by default, the method should look like this:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">CollectionDataReady</span><span class="p">(</span><span class="kt">object</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="n">ComponentDataReadyEventArgs</span><span class="w"> </span><span class="n">e</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">      </span><span class="c1">//Channel based list of data for this frame interval</span>
<span class="w">      </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="p">();</span>

<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">          </span><span class="c1">// Loops through each connected sensor</span>
<span class="w">          </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">          </span><span class="p">{</span>
<span class="w">              </span><span class="c1">// Loops through each channel for a sensor</span>
<span class="w">              </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">              </span><span class="p">{</span>
<span class="w">                  </span><span class="n">data</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">);</span>
<span class="w">                  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">&lt;</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">k2</span><span class="o">++</span><span class="p">){</span>
<span class="w">                      </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">]);</span>
<span class="w">                  </span><span class="p">}</span>
<span class="w">              </span><span class="p">}</span>
<span class="w">          </span><span class="p">}</span>

<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="c1">//Add frame data to entire collection data buffer</span>
<span class="w">      </span><span class="n">AllCollectionData</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="w">      </span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AllCollectionData</span><span class="p">.</span><span class="n">Count</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>Basically, what is happening in this function is the data for the specific frame your application is on is being read, and the three for-loops make sure that the data from each channel of every sensor is read. Notice the line <code class="docutils literal notranslate"><span class="pre">Debug.Log(e.Data[k].SensorData[i].ChannelData[j].Data[k2]);</span></code> in the innermost for-loop. This line prints out every single piece of data from every sensor for this frame to the Unity log. So, if you wish to access data from a specific sensor, you can add a line into the innermost for-loop to looking for that specific data. For example, you could add the line <code class="docutils literal notranslate"><span class="pre">latestDataFromSensor1Channel1</span> <span class="pre">=</span> <span class="pre">e.Data[k].SensorData[0].ChannelData[0].Data[k2];</span></code> to the innermost for-loop, and collect new data every frame. And similarly to the above non-real time method, if you want to access this data outside of the Example Script, you can define <code class="docutils literal notranslate"><span class="pre">data</span></code> as <code class="docutils literal notranslate"><span class="pre">latestDataFromSensor1Channel1</span></code> and access it using the template. This will give you access to the data as it comes. If you have multiple sensors connected, make sure you are accessing the data from the correct sensor and channel. Alternatively, if you know the sensor’s index, you can access it’s data in real time using an if statement like this:</p>
<div class="highlight-cs notranslate"><div class="highlight"><pre><span></span><span class="c1">//Channel based list of data for this frame interval</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;&gt;</span><span class="p">();</span>

<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// Loops through each connected sensor</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Loops through each channel for a sensor</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="n">data</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">);</span>
<span class="w">            </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span><span class="w"> </span><span class="n">k2</span><span class="w"> </span><span class="o">&lt;</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">.</span><span class="n">Count</span><span class="p">();</span><span class="w"> </span><span class="n">k2</span><span class="o">++</span><span class="p">){</span>
<span class="w">                </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="c1">//Heart Rate Sensor Index</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="n">latestHRData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">else</span><span class="w"> </span><span class="nf">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="c1">//Avanti Sensor Index</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="n">latestEMGData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="n">Debug</span><span class="p">.</span><span class="n">Log</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="n">Data</span><span class="p">[</span><span class="n">k</span><span class="p">].</span><span class="n">SensorData</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">ChannelData</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">Data</span><span class="p">[</span><span class="n">k2</span><span class="p">]);</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>

<span class="c1">//Add frame data to entire collection data buffer</span>
<span class="n">AllCollectionData</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AllCollectionData</span><span class="p">.</span><span class="n">Count</span><span class="p">.</span><span class="n">ToString</span><span class="p">();</span>
</pre></div>
</div>
<p>You can find out more about the sensors and their channels from the <a class="reference external" href="https://delsys.com/downloads/USERSGUIDE/delsys-api.pdf">Delsys API User Guide</a>.</p>
</section>
</section>
<section id="section-review">
<h2>Section Review<a class="headerlink" href="#section-review" title="Link to this heading"></a></h2>
<p>Now that you have collected data from the Trigno Link in a regular 2D Unity project, you are ready to extend that knowledge to VR! Luckily, not much changes in the implementation going from 2D to VR, so it should be a quick process for the next module, especially because you already learned the basics of VR in module two. Thank you so much for sticking around, your hard work is appreciated!</p>
<section id="module-self-assessment">
<h3>Module Self-Assessment<a class="headerlink" href="#module-self-assessment" title="Link to this heading"></a></h3>
<div class="quizdown">---
shuffle_answers: false
---

## True or False? You need to have at least one Avanti sensor connected to use the Trigno Link

&gt; Re-read the Getting Started section.

1. [x] True
2. [ ] False
     &gt; The correct answer is True.

 ## True or False? The Unity Example ``GameObject`` is not necessary for the Trigno Link Integration.

 &gt; Re-read the section on Adding GameObjects.

 1. [ ] True
     &gt; The correct answer is False.
 2. [x] False

 ## Which of the following is not one of the lists in ``AllCollectionData`` ?

 &gt; Re-read the section on Collecting Sensor Data in Non-Real Time.

 1. [ ] Component
     &gt; The correct answer is Time Stamp.
 2. [x] Time Stamp
 3. [ ] Channel
     &gt; The correct answer is Time Stamp.
 4. [ ] Data
     &gt; The correct answer is Time Stamp.

 ## Where can you find logged information about the application while it&#x27;s running?

 &gt; Re-read the sections on Running the Application.

 1. [ ] The Trigno Base Station
     &gt; The correct answer is The Unity Console.
 2. [ ] The Inspector Window
     &gt; The correct answer is The Unity Console.
 3. [ ] The Trigno Link
     &gt; The correct answer is The Unity Console.
 4. [x] The Unity Console</div></section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../m3/intro_to_sensors.html" class="btn btn-neutral float-left" title="Introduction to Physiological Sensors" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../m5/integration.html" class="btn btn-neutral float-right" title="Integration with VR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, E. Matzek, T. Yankee, O. Kohler, M. White, M. Duver, R. Licata, N. Pepper, R. Almutairi, A. Megyeri, N.K. Banerjee, and S. Banerjee.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>